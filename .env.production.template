# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# AI-Arbeidsdeskundige Production Environment Configuration
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# 
# SECURITY WARNING: Never commit this file with real values!
# Copy to .env.production and fill in your actual values
#
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# ┌────────────────────────────────────────────────────────────────────────┐
# │ APPLICATION CONFIGURATION                                              │
# └────────────────────────────────────────────────────────────────────────┘

# Environment type (REQUIRED)
NODE_ENV=production
ENVIRONMENT=production

# Application domain and URLs (REQUIRED)
DOMAIN=your-domain.com
FRONTEND_URL=https://your-domain.com
BACKEND_URL=https://api.your-domain.com
API_BASE_URL=https://api.your-domain.com/api/v1

# ┌────────────────────────────────────────────────────────────────────────┐
# │ DATABASE CONFIGURATION                                                 │
# └────────────────────────────────────────────────────────────────────────┘

# PostgreSQL Database (REQUIRED)
POSTGRES_USER=your_secure_db_user
POSTGRES_PASSWORD=your_very_secure_password_here_32_chars_minimum
POSTGRES_DB=ai_arbeidsdeskundige_prod
POSTGRES_SERVER=db
POSTGRES_PORT=5432

# Database connection pool settings
POSTGRES_POOL_SIZE=20
POSTGRES_MAX_OVERFLOW=0
POSTGRES_POOL_TIMEOUT=30
POSTGRES_POOL_RECYCLE=3600

# ┌────────────────────────────────────────────────────────────────────────┐
# │ REDIS CONFIGURATION                                                    │
# └────────────────────────────────────────────────────────────────────────┘

# Redis for caching and task queues (REQUIRED)
REDIS_URL=redis://:your_redis_password@redis:6379/0
REDIS_PASSWORD=your_secure_redis_password

# ┌────────────────────────────────────────────────────────────────────────┐
# │ AI/LLM PROVIDER CONFIGURATION (Choose one primary provider)           │
# └────────────────────────────────────────────────────────────────────────┘

# Primary LLM Provider (REQUIRED: anthropic, openai, or google)
LLM_PROVIDER=anthropic

# Anthropic Claude API (if LLM_PROVIDER=anthropic)
ANTHROPIC_API_KEY=sk-ant-api03-your-key-here
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022

# OpenAI API (if LLM_PROVIDER=openai)
OPENAI_API_KEY=sk-proj-your-key-here
OPENAI_MODEL=gpt-4o

# Google Gemini API (if LLM_PROVIDER=google)
GOOGLE_API_KEY=your-google-ai-key-here
GOOGLE_MODEL=gemini-1.5-pro

# ┌────────────────────────────────────────────────────────────────────────┐
# │ SECURITY CONFIGURATION                                                 │
# └────────────────────────────────────────────────────────────────────────┘

# JWT Secret (REQUIRED - Generate with: openssl rand -hex 32)
JWT_SECRET_KEY=your_jwt_secret_64_characters_minimum_for_production_security
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# API Security
API_KEY_SECRET=your_api_key_secret_for_internal_services
CORS_ORIGINS=https://your-domain.com,https://www.your-domain.com
TRUSTED_HOSTS=your-domain.com,www.your-domain.com,api.your-domain.com

# ┌────────────────────────────────────────────────────────────────────────┐
# │ SSL/TLS CONFIGURATION                                                  │
# └────────────────────────────────────────────────────────────────────────┘

# SSL Configuration
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/cert.pem
SSL_KEY_PATH=/etc/ssl/private/key.pem
SSL_CA_PATH=/etc/ssl/certs/ca.pem

# Let's Encrypt Configuration
LETSENCRYPT_EMAIL=your-email@your-domain.com
LETSENCRYPT_STAGING=false

# ┌────────────────────────────────────────────────────────────────────────┐
# │ STORAGE CONFIGURATION                                                  │
# └────────────────────────────────────────────────────────────────────────┘

# File Storage
STORAGE_PATH=/app/storage
MAX_UPLOAD_SIZE=20971520
ALLOWED_FILE_TYPES=pdf,docx,txt,mp3,wav,m4a

# Cloud Storage (Optional - for backup/CDN)
# AWS_ACCESS_KEY_ID=your_aws_access_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret_key
# AWS_S3_BUCKET=your-bucket-name
# AWS_S3_REGION=eu-west-1

# ┌────────────────────────────────────────────────────────────────────────┐
# │ AI/RAG OPTIMIZATION SETTINGS                                          │
# └────────────────────────────────────────────────────────────────────────┘

# RAG Pipeline Configuration
RAG_CHUNK_SIZE=1000
RAG_CHUNK_OVERLAP=200
RAG_MAX_CHUNKS=20
EMBEDDING_DIMENSION=768
QUALITY_THRESHOLD=0.75

# Document Processing
MAX_DIRECT_DOCUMENT_LENGTH=80000
HYBRID_APPROACH=true
DIRECT_LLM_MODE=false

# Processing Timeouts (seconds)
DB_OPERATION_TIMEOUT=60
API_TIMEOUT=30
CHUNKING_TIMEOUT=60
MAX_RETRY_ATTEMPTS=3

# ┌────────────────────────────────────────────────────────────────────────┐
# │ PERFORMANCE CONFIGURATION                                              │
# └────────────────────────────────────────────────────────────────────────┘

# Application Workers
UVICORN_WORKERS=4
UVICORN_MAX_REQUESTS=1000
UVICORN_MAX_REQUESTS_JITTER=100

# Celery Worker Configuration
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_PREFETCH=1
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000
CELERY_TASK_TIMEOUT=300
CELERY_RESULT_EXPIRES=3600

# Memory and Resource Limits
MEMORY_LIMIT=2048
CPU_LIMIT=2.0

# ┌────────────────────────────────────────────────────────────────────────┐
# │ MONITORING AND LOGGING                                                 │
# └────────────────────────────────────────────────────────────────────────┘

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/var/log/app/application.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5

# Metrics and Monitoring
METRICS_ENABLED=true
METRICS_RETENTION_HOURS=168
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# Health Checks
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# Alert Configuration
ALERT_ENABLED=true
ALERT_EMAIL=alerts@your-domain.com
ALERT_WEBHOOK_URL=https://your-monitoring-service.com/webhook

# ┌────────────────────────────────────────────────────────────────────────┐
# │ BACKUP CONFIGURATION                                                   │
# └────────────────────────────────────────────────────────────────────────┘

# Backup Settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/backups

# Database Backup
DB_BACKUP_ENABLED=true
DB_BACKUP_COMPRESSION=true
DB_BACKUP_ENCRYPTION_KEY=your_backup_encryption_key_32_chars

# File Backup
FILE_BACKUP_ENABLED=true
FILE_BACKUP_INCREMENTAL=true

# ┌────────────────────────────────────────────────────────────────────────┐
# │ EXTERNAL SERVICES (Optional)                                          │
# └────────────────────────────────────────────────────────────────────────┘

# Email Service (for notifications)
# SMTP_HOST=smtp.your-provider.com
# SMTP_PORT=587
# SMTP_USER=your-smtp-user
# SMTP_PASSWORD=your-smtp-password
# SMTP_TLS=true

# Sentry Error Tracking
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ┌────────────────────────────────────────────────────────────────────────┐
# │ LEGACY COMPATIBILITY (Maintain for migration)                         │
# └────────────────────────────────────────────────────────────────────────┘

# Supabase compatibility (keep for gradual migration)
SUPABASE_URL=${BACKEND_URL}
SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0

# ┌────────────────────────────────────────────────────────────────────────┐
# │ DEPLOYMENT METADATA                                                    │
# └────────────────────────────────────────────────────────────────────────┘

# Deployment tracking
DEPLOYMENT_VERSION=1.0.0
DEPLOYMENT_DATE=2025-01-29
BUILD_HASH=your-git-commit-hash

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# END OF CONFIGURATION
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━